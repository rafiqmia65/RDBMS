# ALTER TABLE & Constraints in SQL & PostgreSQL

This document provides a explanation of **ALTER TABLE**, focusing on **adding, modifying, and removing constraints**, as well as **altering default values and column rules**. It is suitable for `README.md`, GitHub documentation, and database learning resources.

---

## 1. What Is ALTER TABLE?

`ALTER TABLE` is a SQL command used to **modify an existing table structure** without deleting the table or losing data.

It allows you to:

- Add or drop columns
- Add, modify, or remove constraints
- Change default values
- Rename columns or tables

---

## 2. ALTER TABLE Syntax (Basic)

```sql
ALTER TABLE table_name
ACTION;
```

Multiple actions can be performed using separate `ALTER TABLE` statements.

---

## 3. Altering Column Constraints

Column constraints control data validity. PostgreSQL allows you to modify them using `ALTER TABLE`.

---

### 3.1 Add NOT NULL Constraint

```sql
ALTER TABLE users
ALTER COLUMN username SET NOT NULL;
```

---

### 3.2 Drop NOT NULL Constraint

```sql
ALTER TABLE users
ALTER COLUMN username DROP NOT NULL;
```

---

### 3.3 Add UNIQUE Constraint

```sql
ALTER TABLE users
ADD CONSTRAINT unique_email UNIQUE (email);
```

---

### 3.4 Drop UNIQUE Constraint

```sql
ALTER TABLE users
DROP CONSTRAINT unique_email;
```

---

### 3.5 Add CHECK Constraint

```sql
ALTER TABLE employees
ADD CONSTRAINT age_check CHECK (age >= 18);
```

---

### 3.6 Drop CHECK Constraint

```sql
ALTER TABLE employees
DROP CONSTRAINT age_check;
```

---

## 4. Altering DEFAULT Values

Default values are applied when no value is provided during `INSERT`.

---

### 4.1 Set a DEFAULT Value

```sql
ALTER TABLE tasks
ALTER COLUMN status SET DEFAULT 'pending';
```

---

### 4.2 Remove a DEFAULT Value

```sql
ALTER TABLE tasks
ALTER COLUMN status DROP DEFAULT;
```

---

## 5. Altering Column Data Types

You can change a column’s data type if existing data is compatible.

```sql
ALTER TABLE users
ALTER COLUMN age TYPE BIGINT;
```

> ⚠️ If conversion is unsafe, PostgreSQL will throw an error.

---

## 6. Adding & Removing Columns

### 6.1 Add a New Column

```sql
ALTER TABLE users
ADD COLUMN is_verified BOOLEAN DEFAULT false;
```

---

### 6.2 Drop a Column

```sql
ALTER TABLE users
DROP COLUMN is_verified;
```

---

## 7. ALTER TABLE with FOREIGN KEY Constraints

### 7.1 Add FOREIGN KEY

```sql
ALTER TABLE orders
ADD CONSTRAINT fk_user
FOREIGN KEY (user_id) REFERENCES users(id);
```

---

### 7.2 Drop FOREIGN KEY

```sql
ALTER TABLE orders
DROP CONSTRAINT fk_user;
```

---

## 8. Renaming Columns and Tables

### 8.1 Rename Column

```sql
ALTER TABLE users
RENAME COLUMN username TO user_name;
```

---

### 8.2 Rename Table

```sql
ALTER TABLE users
RENAME TO app_users;
```

---

## 9. Best Practices

- Always **backup data** before altering production tables
- Use **named constraints** for easy maintenance
- Avoid frequent ALTER operations on large tables
- Test ALTER queries in staging environments

---

## 10. Summary

- `ALTER TABLE` modifies existing table structure
- Constraints can be added, changed, or removed safely
- DEFAULT values can be updated without data loss
- PostgreSQL provides powerful control over schema evolution

---

**Author:** Md Rafiq Mia
**Use Case:** SQL & PostgreSQL Learning / GitHub Documentation
