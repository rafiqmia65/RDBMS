# Handling NULL with COALESCE (SQL & PostgreSQL)

This document explains how to **handle NULL values using the COALESCE function** in **SQL and PostgreSQL**. It is written in a professional format suitable for `README.md`, GitHub documentation, and interview preparation.

---

## 1. Understanding NULL in SQL

In SQL, `NULL` represents **missing, unknown, or undefined data**. It is not the same as:

- `0` (zero)
- An empty string (`''`)
- `FALSE`

Because of this, NULL values require **special handling** in queries.

---

## 2. What Is COALESCE?

`COALESCE()` is a **scalar function** that returns the **first non-NULL value** from a list of expressions.

### Basic Syntax

```sql
COALESCE(expression1, expression2, ..., expressionN)
```

- Evaluates expressions from left to right
- Returns the first non-NULL value
- Returns `NULL` only if all expressions are `NULL`

---

## 3. Why Use COALESCE?

Common use cases include:

- Replacing NULL values with defaults
- Preventing NULL results in calculations
- Improving query readability
- Handling optional columns

---

## 4. Basic Examples

### 4.1 Replacing NULL with a Default Value

```sql
SELECT name, COALESCE(phone, 'Not Provided') AS phone_number
FROM users;
```

If `phone` is NULL, the result will show **"Not Provided"**.

---

### 4.2 Numeric Example

```sql
SELECT product_name, COALESCE(discount, 0) AS discount
FROM products;
```

This ensures calculations are safe when `discount` is NULL.

---

## 5. COALESCE in Calculations

Without COALESCE:

```sql
SELECT price - discount AS final_price
FROM products;
```

If `discount` is NULL → `final_price` becomes NULL ❌

With COALESCE:

```sql
SELECT price - COALESCE(discount, 0) AS final_price
FROM products;
```

✔ Always returns a valid number.

---

## 6. COALESCE with Multiple Columns

```sql
SELECT COALESCE(home_phone, office_phone, mobile_phone) AS contact_number
FROM employees;
```

The first available phone number is returned.

---

## 7. COALESCE vs IS NULL / CASE

### Using CASE

```sql
SELECT
  CASE
    WHEN email IS NULL THEN 'No Email'
    ELSE email
  END AS email
FROM users;
```

### Using COALESCE (Preferred)

```sql
SELECT COALESCE(email, 'No Email') AS email
FROM users;
```

COALESCE is **shorter, cleaner, and more readable**.

---

## 8. COALESCE with Aggregates

Aggregate functions may return NULL when no rows match.

```sql
SELECT COALESCE(SUM(amount), 0) AS total_amount
FROM payments
WHERE user_id = 10;
```

Ensures a numeric result instead of NULL.

---

## 9. Data Type Rules

- All expressions must be **compatible data types**
- PostgreSQL automatically performs type casting when possible

Example:

```sql
COALESCE(NULL, 0, 10)      -- Valid
COALESCE(NULL, 'N/A')     -- Valid
```

---

## 10. Best Practices

- Use COALESCE for NULL-safe calculations
- Apply it in SELECT, WHERE, ORDER BY, and aggregates
- Avoid overusing COALESCE in indexes (performance consideration)
- Prefer COALESCE over complex CASE statements

---

## 11. Summary

- NULL represents missing or unknown data
- COALESCE returns the first non-NULL value
- Simplifies NULL handling in queries
- Improves data consistency and readability

---

**Author:** Md Rafiq Mia
**Use Case:** SQL & PostgreSQL Learning / GitHub Documentation
