# Foreign Keys Explained

## ðŸ“Œ Introduction

A **Foreign Key (FK)** is a fundamental concept in relational databases. It is used to maintain **relationships** between tables and ensure **referential integrity**.

While a **Primary Key** uniquely identifies records in a table, a **Foreign Key** links one table to another by referencing the primary key of the related table.

---

## **1. What is a Foreign Key?**

A **Foreign Key** is:

- An attribute (or a set of attributes) in one table that **refers to the primary key of another table**.
- Used to **enforce referential integrity**, ensuring that the value exists in the parent table.
- Can be **single-column** or **multi-column** (composite foreign key).

### **Example Tables**

**Students Table** (Parent Table)

| student_id (PK) | name  | email       |
| --------------- | ----- | ----------- |
| 101             | Rafiq | a@gmail.com |
| 102             | Rahim | b@gmail.com |

**Enrollments Table** (Child Table)

| enrollment_id | student_id (FK) | course_id |
| ------------- | --------------- | --------- |
| 1             | 101             | 10        |
| 2             | 102             | 11        |

Here:

- `student_id` in `Enrollments` is a **Foreign Key** referencing `Students.student_id`.

---

## **2. Purpose of a Foreign Key**

1. **Maintain Referential Integrity**

   - Prevents invalid data in the child table.
   - Example: You cannot add a `student_id = 999` in `Enrollments` if it doesnâ€™t exist in `Students`.

2. **Define Relationships Between Tables**

   - One-to-One
   - One-to-Many
   - Many-to-Many (via junction tables)

3. **Enable Cascading Actions**
   - `ON DELETE CASCADE` â†’ Automatically delete child records when parent is deleted
   - `ON UPDATE CASCADE` â†’ Automatically update child records when parent key changes

---

## **3. Rules of a Foreign Key**

1. **Must refer to a Primary Key or Unique Key** in another table.
2. **Values must match the referenced table** or be NULL (if allowed).
3. **Enforces relational constraints**, preventing orphan records.
4. **Can have multiple foreign keys** in one table (for multiple relationships).

---

## **4. Types of Foreign Key Relationships**

| Relationship Type | Description                                    | Example                                  |
| ----------------- | ---------------------------------------------- | ---------------------------------------- |
| **One-to-One**    | Each row in parent matches one row in child    | `person_id` in `Passports` table         |
| **One-to-Many**   | One row in parent can have multiple child rows | `Students` â†’ `Enrollments`               |
| **Many-to-Many**  | Implemented using a junction table             | `Students` â†” `Courses` via `Enrollments` |

---

## **5. Composite Foreign Keys**

A **Composite Foreign Key** uses **two or more columns** to reference a composite primary key in another table.

**Example: Enrollment Table**

| student_id | course_id | semester |
| ---------- | --------- | -------- |
| 101        | 10        | 1        |
| 101        | 11        | 1        |

Here, `{student_id, course_id}` could be a **composite foreign key** referencing a composite primary key in a `Course_Enrollment` table.

---

## **6. Cascading Actions**

Foreign Keys can enforce **automatic actions** to maintain integrity:

| Action                 | Description                                   |
| ---------------------- | --------------------------------------------- |
| **ON DELETE CASCADE**  | Deletes child records when parent is deleted  |
| **ON UPDATE CASCADE**  | Updates child records when parent key changes |
| **ON DELETE SET NULL** | Sets FK to NULL if parent is deleted          |
| **ON DELETE RESTRICT** | Prevents deletion of parent if child exists   |

---

## **7. Why Foreign Keys Are Important**

- Prevent **orphaned records** in child tables
- Enforce **data consistency and accuracy**
- Enable **complex queries using JOINs**
- Establish **logical relationships** in database design

---

## **8. Example SQL Statements**

### Creating Parent Table

```sql
CREATE TABLE Students (
    student_id INT PRIMARY KEY,
    name VARCHAR(50),
    email VARCHAR(50) UNIQUE
);
```

````

### Creating Child Table with Foreign Key

```sql
CREATE TABLE Enrollments (
    enrollment_id INT PRIMARY KEY,
    student_id INT,
    course_id INT,
    FOREIGN KEY (student_id) REFERENCES Students(student_id)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);
```

---

## **9. Summary**

- **Foreign Key** links child table to parent table via primary key.
- Ensures **referential integrity**.
- Supports **one-to-one, one-to-many, and many-to-many relationships**.
- Can have **single-column or composite keys**.
- Supports **cascading updates and deletions**.

A properly used foreign key **prevents invalid or inconsistent data** and is crucial for robust relational database design.

---

## Â© License

This document is free to use, modify, and include in your GitHub repository.
````
